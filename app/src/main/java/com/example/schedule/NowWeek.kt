package com.example.schedule

import android.content.Context
import android.content.Intent
import android.content.SharedPreferences
import android.content.pm.ActivityInfo
import android.graphics.Bitmap
import android.graphics.BitmapFactory
import android.graphics.Color
import android.graphics.drawable.GradientDrawable
import android.graphics.drawable.StateListDrawable
import android.net.ConnectivityManager
import android.net.Uri
import android.os.Build
import android.os.Bundle
import android.provider.MediaStore
import android.text.TextUtils
import android.view.View
import android.widget.*
import androidx.annotation.Nullable
import androidx.annotation.RequiresApi
import androidx.appcompat.app.AppCompatActivity
import kotlinx.coroutines.*
import org.jsoup.Jsoup
import java.io.*
import java.nio.charset.Charset
import java.time.LocalDate
import android.widget.Button
import android.widget.Toast
import com.nvt.color.ColorPickerDialog
import java.io.FileOutputStream
import android.database.sqlite.SQLiteDatabase
import android.database.sqlite.SQLiteOpenHelper

class NowWeek : AppCompatActivity() {

    var SelectWeek = 0
    var SelectGroup = 3
    var SelectAcademy = 0
    var SelectChetNechet = 0
    var ColorText = 0
    var week=""
    var AcademyPick="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAQCAYAAAB6Hg0eAAAC8XpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZZZjiQpDIbfOcUcIbyBOQ6rNDeY488PQWZnVaVa6uWxQAGkwxjjzxAZxn//zvAPCkmOQS15zDFeKJo1c8HAr7uU3dKlu92F43lHH+Xh9NCASNDL/dPPBHrI6Wng7gpG9mLI23lRP77Ieuz7J0NnIVkeMQZnfshnIHy/oGOgnO3F7Ol1C/Xot3EM+/2E1czGecms3u8+/9aE6HXDOsI8JEtGG9fish6WIleAuGCYoURiGJsoWhE6XiAY72L0LLfnFF7dfo4+EYn1PRDRoyHL0Otq8dnTOznZ+8Cv6H7wSMoZMeqrXC79sp3zzNl9zoFgr10UjQhnPJt6bHGPoIiNqexpETXhMYzTrhnVkbgtAHdHLlTURpmY5Jqk1KnQpLH7Rg0uKg9O6Jkby5a5JM7cZGHSAEZKkxPodXHwa0ArkPLTF9rr5r1cI8fCnaDJBGO08aOGx+BP61tDc670JVrBjHXHCn7xOhBwY5FbLbSAgOYjj2wH+FE/l3VsFjPbYXZssFz1NlGNfuSWhA1aoGjob8iU+jGAEGFtgzMkIHBFJD9FuhJzIkIcHXwKPGcJyhUIyIw7vGQViYDjvNbGnERbl41vMe4rgDCJkoAGxwusVE1xsSV15FAxMTWzaMncspUoUaPFGFNcF19JkjRZiiklTzkVF1c3j57cPXsJmXGYNVuOOWXPOZeCRQssF8wuXiCoXKVqtRprql5zLQ3p07RZiy01b7mV0LlLxx3RY0/de+5l0EAqDR024kjDRx5lItWmTJ0240zTZ57lSW1TDR+YfSX3c2p0qAFY2MwUSg9qEKf0MEHrOrHFDMRYCcTTIoCE5sXsclLlRS4sZldmnApjeGkLTqdFDAR1ENukJ7sf5L5wCzj3v8uNX8mFhe5vkAsL3RtyX7m9odbL/hyt+wEX2zqGK6iX4PhBYXhhL+uD9kt9+NUJ34a+DX0b+nk/cVjxfy78D2wsiLFYEbBWAAAAaHpUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHjaPUq5DYAwEOtvCka4sy+QjBMSCjoK9hdWCmz5kWy7n3fYtpC7sSay5fQUfwAxHDxUO0GXgKlscrCtdWi9GCzsLMZUkIFTt6rudPsA9+IXaLhfHPMAAAGFaUNDUElDQyBwcm9maWxlAAB4nH2RPUjDQBzFX1NLVSoOdhBRyFCdLIhfOEoVi2ChtBVadTC59ENo0pCkuDgKrgUHPxarDi7Oujq4CoLgB4ijk5Oii5T4v6TQIsaD4368u/e4ewcI9TJTzY4xQNUsIxWPidncihh8RReGEMQUAhIz9UR6IQPP8XUPH1/vojzL+9yfo0fJmwzwicSzTDcs4nXi6U1L57xPHGYlSSE+Jx416ILEj1yXXX7jXHRY4JlhI5OaIw4Ti8U2ltuYlQyVeJI4oqga5QtZlxXOW5zVcpU178lfGMpry2mu0xxEHItIIAkRMqrYQBkWorRqpJhI0X7Mwz/g+JPkksm1AUaOeVSgQnL84H/wu1uzMDHuJoViQODFtj+GgeAu0KjZ9vexbTdOAP8zcKW1/JU6MPNJeq2lRY6A3m3g4rqlyXvA5Q7Q/6RLhuRIfppCoQC8n9E35YC+W6B71e2tuY/TByBDXS3dAAeHwEiRstc83t3Z3tu/Z5r9/QCRBXKzc1ODDwAAVI5pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4KIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczpwZGY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGRmLzEuMy8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIKICAgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIgogICB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MGRjZjE5OWEtZjIxNi1jYjQ0LThmMWQtM2I5NDAzZTI1OTY2IgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc4YjRjNGYwLWY2YWEtNDZiYy05YjQ5LTYzZmE0YTg1NDA3ZSIKICAgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk0OTc0MzdlLWZmZTMtODg0MS05YTk0LWFkMzVlZjljNWU1NiIKICAgZGM6Zm9ybWF0PSJpbWFnZS9wbmciCiAgIGV4aWY6Q29sb3JTcGFjZT0iMSIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjQxNTciCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSI3NzQzIgogICBHSU1QOkFQST0iMy4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTY2NDQzODA3NDgzOTc4MiIKICAgR0lNUDpWZXJzaW9uPSIyLjk5LjYiCiAgIHBkZjpQcm9kdWNlcj0iQ29yZWwgUERGIEVuZ2luZSBWZXJzaW9uIDIwLjEuMC43MDgiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249IjMwMDAwMDAvMTAwMDAiCiAgIHRpZmY6WVJlc29sdXRpb249IjMwMDAwMDAvMTAwMDAiCiAgIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAzLTIzVDE5OjIyOjI3KzA4OjAwIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDMtMjRUMjI6NTI6MTkrMDg6MDAiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAzLTI0VDIyOjUyOjE5KzA4OjAwIj4KICAgPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSJJVCBhY2FkZW15IgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSJJVCBhY2FkZW15Ii8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQo9C90LjQutCw0LvRjNC90LDRjyDRgdC+0LLQvNC10YHRgtC90LDRjyDQv9GA0L7Qs9GA0LDQvNC80LAgIEVuKyBHcm91cCAvINCg0KPQodCQ0JsgLyDQmNCg0J3QmNCi0KMgIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQo9C90LjQutCw0LvRjNC90LDRjyDRgdC+0LLQvNC10YHRgtC90LDRjyDQv9GA0L7Qs9GA0LDQvNC80LAgIEVuKyBHcm91cCAvINCg0KPQodCQ0JsgLyDQmNCg0J3QmNCi0KMgIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQnNC40YAg0L3QvtCy0YvRhSAg0LLQvtC30LzQvtC20L3QvtGB0YLQtdC5ICDQtNC70Y8g0LHRg9C00YPRidC40YUgIEnQoiDQv9GA0L7RhNC10YHRgdC40L7QvdCw0LvQvtCyIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQnNC40YAg0L3QvtCy0YvRhSAg0LLQvtC30LzQvtC20L3QvtGB0YLQtdC5ICDQtNC70Y8g0LHRg9C00YPRidC40YUgIEnQoiDQv9GA0L7RhNC10YHRgdC40L7QvdCw0LvQvtCyIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQo9C90LjQutCw0LvRjNC90LDRjyDRgdC+0LLQvNC10YHRgtC90LDRjyDQv9GA0L7Qs9GA0LDQvNC80LAgIEVuKyBHcm91cCAvINCg0KPQodCQ0JsgLyDQmNCg0J3QmNCi0KMgIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQo9C90LjQutCw0LvRjNC90LDRjyDRgdC+0LLQvNC10YHRgtC90LDRjyDQv9GA0L7Qs9GA0LDQvNC80LAgIEVuKyBHcm91cCAvINCg0KPQodCQ0JsgLyDQmNCg0J3QmNCi0KMgIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRjdGC0LDQv9GLIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRjdGC0LDQv9GLIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQviDQv9GA0L7Qs9GA0LDQvNC80LUiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC+INC/0YDQvtCz0YDQsNC80LzQtSIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0KbQtdC70Ywg0L/RgNC+0LPRgNCw0LzQvNGLIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQptC10LvRjCDQv9GA0L7Qs9GA0LDQvNC80YsiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGB0L/QuNC60LXRgNGLIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdC/0LjQutC10YDRiyIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0LLQvtC30LzQvtC20L3QvtGB0YLQuCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0LLQvtC30LzQvtC20L3QvtGB0YLQuCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0L7RgtCy0LXRgtGLIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQvtGC0LLQtdGC0YsiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItC60L7QvdGC0LDQutGC0YsiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC60L7QvdGC0LDQutGC0YsiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGB0LrQsNGH0LDRgtGMINC/0YDQtdC30LXQvdGC0LDRhtC40Y4iCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGB0LrQsNGH0LDRgtGMINC/0YDQtdC30LXQvdGC0LDRhtC40Y4iLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCw0LrRgtC40LLQvdCw0Y8g0YHRgdGL0LvQutCwICDRgSDQv9C10YDQtdGF0L7QtNC+0Lwg0L3QsCDRgdCw0LnRgiIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0LDQutGC0LjQstC90LDRjyDRgdGB0YvQu9C60LAgINGBINC/0LXRgNC10YXQvtC00L7QvCDQvdCwINGB0LDQudGCIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQsNC60YLQuNCy0L3QsNGPINGB0YHRi9C70LrQsCAg0YEg0L/QtdGA0LXRhdC+0LTQvtC8INC90LAg0YHQsNC50YIiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCw0LrRgtC40LLQvdCw0Y8g0YHRgdGL0LvQutCwICDRgSDQv9C10YDQtdGF0L7QtNC+0Lwg0L3QsCDRgdCw0LnRgiIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0LDQutGC0LjQstC90LDRjyDRgdGB0YvQu9C60LAgINGBINC/0LXRgNC10YXQvtC00L7QvCDQvdCwINGB0LDQudGCIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQsNC60YLQuNCy0L3QsNGPINGB0YHRi9C70LrQsCAg0YEg0L/QtdGA0LXRhdC+0LTQvtC8INC90LAg0YHQsNC50YIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGA0L7Qu9C40Log0LTQu9GPINC/0YDQvtGB0LzQvtGC0YDQsCAg0L7RgiDRgdGC0YPQtNC10L3RgtC+0LIiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGA0L7Qu9C40Log0LTQu9GPINC/0YDQvtGB0LzQvtGC0YDQsCAg0L7RgiDRgdGC0YPQtNC10L3RgtC+0LIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9IklUIGFjYWRlbXkiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9IklUIGFjYWRlbXkiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9IklUIGFjYWRlbXkiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9IklUIGFjYWRlbXkiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9IklUIGFjYWRlbXkiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9IklUIGFjYWRlbXkiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9IklUIGFjYWRlbXkiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9IklUIGFjYWRlbXkiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGD0YfQuNGB0Ywg0LIiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGD0YfQuNGB0Ywg0LIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGD0YfQuNGB0Ywg0LIiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGD0YfQuNGB0Ywg0LIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGD0YfQuNGB0Ywg0LIiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGD0YfQuNGB0Ywg0LIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCx0LXQs9GD0YnQsNGPINGB0YLRgNC+0LrQsCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0LHQtdCz0YPRidCw0Y8g0YHRgtGA0L7QutCwIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQsNC60YLQuNCy0L3QsNGPINGB0YHRi9C70LrQsCDQvdCwINC60LDRgNGC0LjQvdC60YMiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCw0LrRgtC40LLQvdCw0Y8g0YHRgdGL0LvQutCwINC90LAg0LrQsNGA0YLQuNC90LrRgyIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0L7QsdC90L7QstC70Y/RjtGJ0LDRj9GB0Y8g0YLQsNCx0LvQuNGG0LAiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC+0LHQvdC+0LLQu9GP0Y7RidCw0Y/RgdGPINGC0LDQsdC70LjRhtCwIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQvtCx0L3QvtCy0LvRj9GO0YnQsNGP0YHRjyDRgtCw0LHQu9C40YbQsCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0L7QsdC90L7QstC70Y/RjtGJ0LDRj9GB0Y8g0YLQsNCx0LvQuNGG0LAiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItC+0LHQvdC+0LLQu9GP0Y7RidCw0Y/RgdGPINGC0LDQsdC70LjRhtCwIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQvtCx0L3QvtCy0LvRj9GO0YnQsNGP0YHRjyDRgtCw0LHQu9C40YbQsCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0LLQvtC30LzQvtC20L3QviDQv9C10YDQtdGF0L7QtCAg0LIg0YLQtdC70LXQs9GA0LDQvNC8INC60LDQvdCw0LsiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCy0L7Qt9C80L7QttC90L4g0L/QtdGA0LXRhdC+0LQgINCyINGC0LXQu9C10LPRgNCw0LzQvCDQutCw0L3QsNC7Ii8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQstC+0LfQvNC+0LbQvdC+INC/0LXRgNC10YXQvtC0ICDQsiDRgtC10LvQtdCz0YDQsNC80Lwg0LrQsNC90LDQuyIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0LLQvtC30LzQvtC20L3QviDQv9C10YDQtdGF0L7QtCAg0LIg0YLQtdC70LXQs9GA0LDQvNC8INC60LDQvdCw0LsiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCy0L7Qt9C80L7QttC90L4g0L/QtdGA0LXRhdC+0LQgINCyINGC0LXQu9C10LPRgNCw0LzQvCDQutCw0L3QsNC7IgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQstC+0LfQvNC+0LbQvdC+INC/0LXRgNC10YXQvtC0ICDQsiDRgtC10LvQtdCz0YDQsNC80Lwg0LrQsNC90LDQuyIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0L/RgNC+0LTRg9C80LDRgtGMIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQv9GA0L7QtNGD0LzQsNGC0YwiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItC/0YDQvtC00YPQvNCw0YLRjCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0L/RgNC+0LTRg9C80LDRgtGMIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQv9GA0L7QtNGD0LzQsNGC0YwiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC/0YDQvtC00YPQvNCw0YLRjCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0J7QsdC10YHQv9C10YfQuNGC0Ywg0LrQvtC80L/QsNC90LjQuCDQstGL0YHQvtC60L7QutCy0LDQu9C40YTQuNGG0LjRgNC+0LLQsNC90L3Ri9C80Lgg0LzQvtC70L7QtNGL0LzQuCDQutCw0LTRgNCw0LzQuCBJ0KIgLSDQvdCw0L/RgNCw0LLQu9C10L3QuNC5INC30LAg0YHRh9C10YIg0YDQsNC30LLQuNGC0LjRjyDRg9C90LgiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCe0LHQtdGB0L/QtdGH0LjRgtGMINC60L7QvNC/0LDQvdC40Lgg0LLRi9GB0L7QutC+0LrQstCw0LvQuNGE0LjRhtC40YDQvtCy0LDQvdC90YvQvNC4INC80L7Qu9C+0LTRi9C80Lgg0LrQsNC00YDQsNC80LggSdCiIC0g0L3QsNC/0YDQsNCy0LvQtdC90LjQuSDQt9CwINGB0YfQtdGCINGA0LDQt9Cy0LjRgtC40Y8g0YPQvdC40LrQsNC70YzQvdGL0YUg0LrQvtC80L/QtdGC0LXQvdGG0LjQuSDQsiDRgdC+0L7RgtCy0LXRgtGB0YLQstC40Lgg0YEg0L/QvtGC0YDQtdCx0L3QvtGB0YLRjNGOINCx0LjQt9C90LXRgdCwINCyINC+0YLRgNCw0YHQu9C4INC80LXRgtCw0LvQu9GD0YDQs9C40Lgg0Lgg0Y3QvdC10YDQs9C10YLQuNC60LguIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSJJINCt0KLQkNCfOiDQvtCx0YnQuNC5ICgxMjAg0YfQtdC7LikiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9Ikkg0K3QotCQ0J86INC+0LHRidC40LkgKDEyMCDRh9C10LsuKSIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0iSUkg0K3QotCQ0J86INGB0L/QtdGG0LjQsNC70LjQt9C40YDQvtCy0LDQvdC90YvQuSAoNTAg0YfQtdC7LikiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9IklJINCt0KLQkNCfOiDRgdC/0LXRhtC40LDQu9C40LfQuNGA0L7QstCw0L3QvdGL0LkgKDUwINGH0LXQuy4pIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSJJSUkg0K3QotCQ0J86INGE0LjQvdCw0LvQuNC30LjRgNGD0Y7RidC40LkgKDMwINGH0LXQuy4pIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSJJSUkg0K3QotCQ0J86INGE0LjQvdCw0LvQuNC30LjRgNGD0Y7RidC40LkgKDMwINGH0LXQuy4pIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgtCw0LHQu9C40YbQsCDRg9GB0L/QtdCy0LDQtdC80L7RgdGC0LgiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGC0LDQsdC70LjRhtCwINGD0YHQv9C10LLQsNC10LzQvtGB0YLQuCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0YLQsNCx0LvQuNGG0LAg0YPRgdC/0LXQstCw0LXQvNC+0YHRgtC4IgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgtCw0LHQu9C40YbQsCDRg9GB0L/QtdCy0LDQtdC80L7RgdGC0LgiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGC0LDQsdC70LjRhtCwINGD0YHQv9C10LLQsNC10LzQvtGB0YLQuCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0YLQsNCx0LvQuNGG0LAg0YPRgdC/0LXQstCw0LXQvNC+0YHRgtC4Ii8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQvdC+0LLQvtGB0YLQuCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0L3QvtCy0L7RgdGC0LgiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItC90L7QstC+0YHRgtC4IgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQvdC+0LLQvtGB0YLQuCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0L3QvtCy0L7RgdGC0LgiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC90L7QstC+0YHRgtC4Ii8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQt9Cw0LTQsNGC0Ywg0LLQvtC/0YDQvtGBICDRgdC/0LjQutC10YDRgyIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0LfQsNC00LDRgtGMINCy0L7Qv9GA0L7RgSAg0YHQv9C40LrQtdGA0YMiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItC30LDQtNCw0YLRjCDQstC+0L/RgNC+0YEgINGB0L/QuNC60LXRgNGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQt9Cw0LTQsNGC0Ywg0LLQvtC/0YDQvtGBICDRgdC/0LjQutC10YDRgyIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0LfQsNC00LDRgtGMINCy0L7Qv9GA0L7RgSAg0YHQv9C40LrQtdGA0YMiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC30LDQtNCw0YLRjCDQstC+0L/RgNC+0YEgINGB0L/QuNC60LXRgNGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YPQtNC10L3RgtGDIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YPQtNC10L3RgtGDIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQn9Cg0J7Qk9Cg0JDQnNCc0JAg4oCiINCb0LXQutGG0LjQuCDQvtGCINC60YDRg9C/0L3Ri9GFIElULdC60L7QvNC/0LDQvdC40LkvINC60YDRg9C/0L3QvtCz0L4g0LHQuNC30L3QtdGB0LAg0LIg0KDQpCDQuCDQvNC40YDQtSAo0KDQvtGB0YLQtdGFL0FsaWJhYmEvTWljcm9zb2Z0INC4IgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQn9Cg0J7Qk9Cg0JDQnNCc0JAg4oCiINCb0LXQutGG0LjQuCDQvtGCINC60YDRg9C/0L3Ri9GFIElULdC60L7QvNC/0LDQvdC40LkvINC60YDRg9C/0L3QvtCz0L4g0LHQuNC30L3QtdGB0LAg0LIg0KDQpCDQuCDQvNC40YDQtSAo0KDQvtGB0YLQtdGFL0FsaWJhYmEvTWljcm9zb2Z0INC4INC00YAuKSDigKIg0KHQtdC80LjQvdCw0YDRiyDigKIg0JzQsNGB0YLQtdGALdC60LvQsNGB0YHRiyDigKIg0KLRgNC10L3QuNC90LPQuCAg4oCiINCa0L7QvdC60YPRgNGBINC/0YDQvtC10LrRgtC90YvRhSDQutC10LnRgdC+0LIg0L/QviDQv9GA0L7QsdC70LXQvNCw0YLQuNC60LUg0KDQo9Ch0JDQmyDQuCBFbisgR3JvdXAuINCS0YvRgdC+0LrQvtC60LLQsNC70LjRhNC40YbQuNGA0L7QstCw0L3QvdGL0LUg0YHQv9C40LrQtdGA0Ysg0LjCoNGB0L/QtdGG0LjQsNC70LjRgdGC0Ysg0LrQvtC80L/QsNC90LjQuSDQoNCj0KHQkNCbINC4IEVuKyBHcm91cC4iLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCf0KDQntCT0KDQkNCc0JzQkCDigKIg0JLQuNC30LjQvtC90LXRgNGB0LrQuNC1INC70LXQutGG0LjQuCDigKIg0JzQsNGB0YLQtdGALdC60LvQsNGB0YHRiyAg4oCiINCh0LXQvNC40L3QsNGA0Ysg4oCiINCg0LXQsNC70LjQt9Cw0YbQuNGPINGA0LXQsNC70YzQvdC+0LPQviDQutC10LnRgdCwINGBINC/0YDQvtC40LfQstC+0LQiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCf0KDQntCT0KDQkNCc0JzQkCDigKIg0JLQuNC30LjQvtC90LXRgNGB0LrQuNC1INC70LXQutGG0LjQuCDigKIg0JzQsNGB0YLQtdGALdC60LvQsNGB0YHRiyAg4oCiINCh0LXQvNC40L3QsNGA0Ysg4oCiINCg0LXQsNC70LjQt9Cw0YbQuNGPINGA0LXQsNC70YzQvdC+0LPQviDQutC10LnRgdCwINGBINC/0YDQvtC40LfQstC+0LTRgdGC0LLQsCAo0L/RgNC+0LXQutGC0L3QvtC1INC+0LHRg9GH0LXQvdC40LUpIOKAoiDQntC30L3QsNC60L7QvNC40YLQtdC70YzQvdGL0LUg0Y3QutGB0LrRg9GA0YHQuNC4INC90LAg0L/RgNC10LTQv9GA0LjRj9GC0LjRj9GFICDQn9GA0LjQstC70LXRh9C10L3QuNC1INGB0L/QtdGG0LjQsNC70LjRgdGC0L7QsiDQoNGD0YHQsNC7INC4ICBFbisgR3JvdXAg0LrCoNGD0YfQtdCx0L3QvtC80YMg0L/RgNC+0YbQtdGB0YHRgyDQn9Cg0J7QmNCX0JLQntCU0KHQotCS0JXQndCd0JDQryDQn9Cg0JDQmtCi0JjQmtCQIOKAoiDQntGA0LPQsNC90LjQt9Cw0YbQuNGPINC+0YfQvdC+0Lkg0L/RgNC+0LjQt9Cy0L7QtNGB0YLQstC10L3QvdC+0Lkg0L/RgNCw0LrRgtC40LrQuCDQvdCwwqDRgNCw0LHQvtGH0LjRhSDQvNC10YHRgtCw0YUg0L3QsCDQsdCw0LfQtSDQv9GA0LXQtNC/0YDQuNGP0YLQuNC5ICAgICAgICjQuNGO0LvRjC3QsNCy0LPRg9GB0YIgMjAyMiDQsy4pLiIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0KLQoNCj0JTQntCj0KHQotCg0J7QmdCh0KLQktCeINCYINCf0KDQkNCa0KLQmNCa0JAg0J3QkCDQoNCQ0JHQntCn0JjQpSDQnNCV0KHQotCQ0KUg4oCiINCe0YfQvdCw0Y8g0L/RgNCw0LrRgtC40LrQsCDQsiDQv9C10YDQuNC+0LQg0LrQsNC90LjQutGD0LsuIOKAoiDQotGA0YPQtNC+0YPRgdGC0YDQvtC50YHRgtCy0L4g0YEiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCi0KDQo9CU0J7Qo9Ch0KLQoNCe0JnQodCi0JLQniDQmCDQn9Cg0JDQmtCi0JjQmtCQINCd0JAg0KDQkNCR0J7Qp9CY0KUg0JzQldCh0KLQkNClIOKAoiDQntGH0L3QsNGPINC/0YDQsNC60YLQuNC60LAg0LIg0L/QtdGA0LjQvtC0INC60LDQvdC40LrRg9C7LiDigKIg0KLRgNGD0LTQvtGD0YHRgtGA0L7QudGB0YLQstC+INGB0YLRg9C00LXQvdGC0L7QsiDQsiDQutC+0LzQv9Cw0L3QuNC4INCyINGA0LXQttC40LzQtSDRg9C00LDQu9GR0L3QvdC+0Lkg0YDQsNCx0L7RgtGLICDQvdCwINC90LXQv9C+0LvQvdGL0Lkg0YDQsNCx0L7Rh9C40Lkg0LTQtdC90Ywg0L3QsMKg0LLRgNC10LzRjyDQvtGB0L3QvtCy0L3QvtCz0L4g0YPRh9C10LHQvdC+0LPQviDQv9GA0L7RhtC10YHRgdCwINCyINCY0YDQndCY0KLQoy4gINCS0KvQn9Cj0KHQmtCd0JDQryDQmtCS0JDQm9CY0KTQmNCa0JDQptCY0J7QndCd0JDQryDQoNCQ0JHQntCi0JAg4oCiINCk0L7RgNC80LjRgNC+0LLQsNC90LjQtSDQuCDRgdC+0LPQu9Cw0YHQvtCy0LDQvdC40LUg0YLQtdC80LDRgtC40LrQuCDQstGL0L/Rg9GB0LrQvdGL0YUg0LrQstCw0LvQuNGE0LjQutCw0YbQuNC+0L3QvdGL0YUg0YDQsNCx0L7RgiDRgdGC0YPQtNC10L3RgtC+0LIsINGB0LLRj9C30LDQvdC90YvRhSDRgSDQv9GA0L7QuNC30LLQvtC00YHRgtCy0LXQvdC90L7QuSDQtNC10Y/RgtC10LvRjNC90L7RgdGC0YzRji4g4oCiINCh0L7Qv9GA0L7QstC+0LbQtNC10L3QuNC1INGB0L4g0YHRgtC+0YDQvtC90Ysg0YDQsNCx0L7RgtC+0LTQsNGC0LXQu9GPINCy0YvQv9C+0LvQvdC10L3QuNGPINGC0LXQutGD0YnQtdC5INGA0LDQsdC+0YLRiyDQsiDQutC+0LzQv9Cw0L3QuNC4INC4wqDQv9C+0LTQs9C+0YLQvtCy0LrQuCDQstGL0L/Rg9GB0LrQvdGL0YUg0LrQstCw0LvQuNGE0LjQutCw0YbQuNC+0L3QvdGL0YUg0YDQsNCx0L7Rgi4g4oCiINCX0LDRidC40YLQsCDQktCa0KAg0LIg0JjRgNCd0JjQotCjINGBINGD0YfQsNGB0YLQuNC10Lwg0YDQsNCx0L7RgtC+0LTQsNGC0LXQu9GPIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRg9GH0LDRgdGC0L3QuNC60Lg6IDIg0LrRg9GA0YEg0L/QtdGA0LjQvtC0OiDQvNCw0YDRgiAyMDIxIOKAkyDQuNGO0LvRjCAyMDIxIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRg9GH0LDRgdGC0L3QuNC60Lg6IDIg0LrRg9GA0YEg0L/QtdGA0LjQvtC0OiDQvNCw0YDRgiAyMDIxIOKAkyDQuNGO0LvRjCAyMDIxIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRg9GH0LDRgdGC0L3QuNC60Lg6IDMg0LrRg9GA0YEg0L/QtdGA0LjQvtC0OiDRgdC10L3RgtGP0LHRgNGMIDIwMjEg4oCTINCw0LLQs9GD0YHRgiAyMDIyIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRg9GH0LDRgdGC0L3QuNC60Lg6IDMg0LrRg9GA0YEg0L/QtdGA0LjQvtC0OiDRgdC10L3RgtGP0LHRgNGMIDIwMjEg4oCTINCw0LLQs9GD0YHRgiAyMDIyIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRg9GH0LDRgdGC0L3QuNC60Lg6IDQg0LrRg9GA0YEg0L/QtdGA0LjQvtC0OiDRgdC10L3RgtGP0LHRgNGMIDIwMjIg4oCTINC40Y7QvdGMIDIwMjMiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGD0YfQsNGB0YLQvdC40LrQuDogNCDQutGD0YDRgSDQv9C10YDQuNC+0LQ6INGB0LXQvdGC0Y/QsdGA0YwgMjAyMiDigJMg0LjRjtC90YwgMjAyMyIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0KPQp9CV0J3QmNCn0JXQodCa0JjQmSDQlNCe0JPQntCS0J7QoCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0KPQp9CV0J3QmNCn0JXQodCa0JjQmSDQlNCe0JPQntCS0J7QoCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0YHRgtGA0YPQutGC0YPRgNCwINGN0YLQsNC/0LAiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGB0YLRgNGD0LrRgtGD0YDQsCDRjdGC0LDQv9CwIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdGC0YDRg9C60YLRg9GA0LAg0Y3RgtCw0L/QsCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0YHRgtGA0YPQutGC0YPRgNCwINGN0YLQsNC/0LAiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGB0YLRgNGD0LrRgtGD0YDQsCDRjdGC0LDQv9CwIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdGC0YDRg9C60YLRg9GA0LAg0Y3RgtCw0L/QsCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0YHQv9C40LrQtdGA0Ysv0Y3QutGB0L/QtdGA0YLRiyDRjdGC0LDQv9CwIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLRgdC/0LjQutC10YDRiy/RjdC60YHQv9C10YDRgtGLINGN0YLQsNC/0LAiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItGB0L/QuNC60LXRgNGLL9GN0LrRgdC/0LXRgNGC0Ysg0Y3RgtCw0L/QsCIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0YHQv9C40LrQtdGA0Ysv0Y3QutGB0L/QtdGA0YLRiyDRjdGC0LDQv9CwIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLRgdC/0LjQutC10YDRiy/RjdC60YHQv9C10YDRgtGLINGN0YLQsNC/0LAiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItGB0L/QuNC60LXRgNGLL9GN0LrRgdC/0LXRgNGC0Ysg0Y3RgtCw0L/QsCIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0JLQvtC30LzQvtC20L3QvtGB0YLQuCDQv9GA0L7Qs9GA0LDQvNC80YsiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCS0L7Qt9C80L7QttC90L7RgdGC0Lgg0L/RgNC+0LPRgNCw0LzQvNGLIi8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSLQmtC+0L3RgtCw0LrRgtGLICIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0JrQvtC90YLQsNC60YLRiyAiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItC+INC90LDRgSDQsiDQodCc0JgiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItC+INC90LDRgSDQsiDQodCc0JgiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCf0L7QstGL0YjQtdC90L3QsNGPINGB0YLQuNC/0LXQvdC00LjRjyAgKDUwMDAg0YDRg9CxLikg0YEgMi3Qs9C+INGN0YLQsNC/0LAiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCf0L7QstGL0YjQtdC90L3QsNGPINGB0YLQuNC/0LXQvdC00LjRjyAgKDUwMDAg0YDRg9CxLikg0YEgMi3Qs9C+INGN0YLQsNC/0LAiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCj0YfQtdC90LjRh9C10YHQutC40Lkg0LTQvtCz0L7QstC+0YAgICjQvdCwIDIt0Lwg0Y3RgtCw0L/QtSkiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCj0YfQtdC90LjRh9C10YHQutC40Lkg0LTQvtCz0L7QstC+0YAgICjQvdCwIDIt0Lwg0Y3RgtCw0L/QtSkiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCT0LDRgNCw0L3RgtC40YDQvtCy0LDQvdC90L7QtSAg0YLRgNGD0LTQvtGD0YHRgtGA0L7QudGB0YLQstC+ICDQv9C+0YHQu9C1INC30LDRidC40YLRiyDQktCa0KAiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCT0LDRgNCw0L3RgtC40YDQvtCy0LDQvdC90L7QtSAg0YLRgNGD0LTQvtGD0YHRgtGA0L7QudGB0YLQstC+ICDQv9C+0YHQu9C1INC30LDRidC40YLRiyDQktCa0KAiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCf0YDQvtC40LfQstC+0LTRgdGC0LLQtdC90L3QsNGPICDQv9GA0LDQutGC0LjQutCwICDQvdCwINC/0YDQtdC00L/RgNC40Y/RgtC40LgiCiAgICAgIHBob3Rvc2hvcDpMYXllclRleHQ9ItCf0YDQvtC40LfQstC+0LTRgdGC0LLQtdC90L3QsNGPICDQv9GA0LDQutGC0LjQutCwICDQvdCwINC/0YDQtdC00L/RgNC40Y/RgtC40LgiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCe0LHRgNCw0LfQvtCy0LDQvdC40LUgINC80LjRgNC+0LLQvtCz0L4g0YPRgNC+0LLQvdGPIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQntCx0YDQsNC30L7QstCw0L3QuNC1ICDQvNC40YDQvtCy0L7Qs9C+INGD0YDQvtCy0L3RjyIvPgogICAgIDxyZGY6bGkKICAgICAgcGhvdG9zaG9wOkxheWVyTmFtZT0i0JPQvtCy0L7RgNC60L7QsiDQkNC70LXQutGB0LXQuSDQodC10YDQs9C10LXQstC40Ycg0JjQvdGB0YLQuNGC0YPRgiDQmNC90YTQvtGA0LzQsNGG0LjQvtC90L3Ri9GFINGC0LXRhdC90L7Qu9C+0LPQuNC5ICDQuCDQsNC90LDQu9C40LfQsCDQtNCw0L3QvdGL0YUg0LTQuNGA0LXQutGC0L7RgCAg0JDRg9C0LiDQki0xMiIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0JPQvtCy0L7RgNC60L7QsiDQkNC70LXQutGB0LXQuSDQodC10YDQs9C10LXQstC40Ycg0JjQvdGB0YLQuNGC0YPRgiDQmNC90YTQvtGA0LzQsNGG0LjQvtC90L3Ri9GFINGC0LXRhdC90L7Qu9C+0LPQuNC5ICDQuCDQsNC90LDQu9C40LfQsCDQtNCw0L3QvdGL0YUg0LTQuNGA0LXQutGC0L7RgCAg0JDRg9C0LiDQki0xMjMgZ292b3Jrb3ZfYXNAaXN0dS5lZHUgODkwODY2MDg5MTIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCf0L7Qv9C+0LLQsCDQkNC90L3QsCDQktC40LrRgtC+0YDQvtCy0L3QsCDQmtC+0YDQv9C+0YDQsNGC0LjQstC90YvQuSDRg9C90LjQstC10YDRgdC40YLQtdGCINC80LXQvdC10LTQttC10YAg0L/RgNC+0LXQutGC0LAgcG9wb3ZhX2F2QGV1cm9zaWIuYWNhZGVteSA4OTE0ODk1IgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSLQn9C+0L/QvtCy0LAg0JDQvdC90LAg0JLQuNC60YLQvtGA0L7QstC90LAg0JrQvtGA0L/QvtGA0LDRgtC40LLQvdGL0Lkg0YPQvdC40LLQtdGA0YHQuNGC0LXRgiDQvNC10L3QtdC00LbQtdGAINC/0YDQvtC10LrRgtCwIHBvcG92YV9hdkBldXJvc2liLmFjYWRlbXkgODkxNDg5NTkwMDIiLz4KICAgICA8cmRmOmxpCiAgICAgIHBob3Rvc2hvcDpMYXllck5hbWU9ItCx0LvQvtC6INGB0YHRi9C70L7QuiIKICAgICAgcGhvdG9zaG9wOkxheWVyVGV4dD0i0LHQu9C+0Log0YHRgdGL0LvQvtC6Ii8+CiAgICAgPHJkZjpsaQogICAgICBwaG90b3Nob3A6TGF5ZXJOYW1lPSJEZXZlbG9wZXIgYWR2b2NhdGUg0LIgWWFuZGV4LkNsb3VkIgogICAgICBwaG90b3Nob3A6TGF5ZXJUZXh0PSJEZXZlbG9wZXIgYWR2b2NhdGUg0LIgWWFuZGV4LkNsb3VkIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwvcGhvdG9zaG9wOlRleHRMYXllcnM+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjk0OTc0MzdlLWZmZTMtODg0MS05YTk0LWFkMzVlZjljNWU1NiIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgSWxsdXN0cmF0b3IgQ0MgMjMuMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDMtMjNUMTk6MjI6MjgrMDg6MDAiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIgogICAgICBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3gtcGhvdG9zaG9wIHRvIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Y2Q0ZmI4OTEtZWZlYS05NTQ5LWEwZTAtYzZhZTNjMGM4NTVkIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBJbGx1c3RyYXRvciBDQyAyMy4wIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMS0wMy0yM1QxOToyMjo0NyswODowMCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiCiAgICAgIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24veC1waG90b3Nob3AgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYTA5ZTE0Yi0wZWY0LTQ1NGMtYjIxYy0yNDgyMjQ1NjQxZDkiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIElsbHVzdHJhdG9yIENDIDIzLjAgKFdpbmRvd3MpIgogICAgICBzdEV2dDp3aGVuPSIyMDIxLTAzLTIzVDE5OjIyOjQ3KzA4OjAwIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmEyYWE0OWViLTZkMWYtNDVjNS1iNzNjLTg0YTI2NTE4Nzc0MiIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDMtMjRUMjI6NTI6MTkrMDg6MDAiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIgogICAgICBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249ImRlcml2ZWQiCiAgICAgIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc3YjUwNDc0LThmMDQtNDYyYy04YzJjLWQyYjI1NTFmMTNhNyIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiCiAgICAgIHN0RXZ0OndoZW49IjIwMjEtMDMtMjRUMjI6NTI6MTkrMDg6MDAiLz4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiCiAgICAgIHN0RXZ0OmNoYW5nZWQ9Ii8iCiAgICAgIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTA1ZWQ0MGUtMzIzZS00OWZjLTg4NDgtZDE5Yzg1YjVhYzIxIgogICAgICBzdEV2dDpzb2Z0d2FyZUFnZW50PSJHSU1QIDIuOTkuNiAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjItMDktMjlUMTU6NTQ6MzQiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogICA8eG1wTU06RGVyaXZlZEZyb20KICAgIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxMWEwNGZmMC0wNTkwLWYzNDctYWMyYy0yZGZjYmVlOWVkY2QiCiAgICBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmEyYWE0OWViLTZkMWYtNDVjNS1iNzNjLTg0YTI2NTE4Nzc0MiIKICAgIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NDk3NDM3ZS1mZmUzLTg4NDEtOWE5NC1hZDM1ZWY5YzVlNTYiLz4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PlgoRn0AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfmCR0HNiL6mXkYAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAi9JREFUSMe91kuIj2EUBvCf+RuXcYmRXEO55JLFiIVYKAobhVIWVpOUFQuxotw2drJQSCjXjetGkh1NuTa5G7cZucUMg8EYNs/Uv2lyq/+cevu+732/7z3nfZ7nnPMVdG4FDMIPDEQVemAAGnWBdetkbhj6oxzj0IR36IUP6I1afCtlYIWi+4FBaSxe4ScaglKPrDfgC0Ym2LZSBzYKm1GBOvTBPczAJ7zFM9SjZ5Drh+ZSBlaBlaFuNE6hFcPxAneCTgsW4kaobs34UYrAyjA0uqmPvnon4DuZa7fvOJf7tqBYMp2Vhar66GhQAn3yh+96hcqS2jxMxgVsxVlMKFqviK76ZvT5Dx/lGf+kscrQVBkqGzAY03AdV5Ohu7Ah8yf+MbA1mJK9/sq6YxLuYgdW4GMRQu22K7VrOVZlbjrWZY9qHInuDiSZPucg+5P1O+NjPA5iZgBoZ+IC5mIRDpYFjXVxdj4nm4HjfzjUc1wOgstwMwd7gJpIZGn23Jc6uDxJtSTFe1u6yqq8X4e1eF+G06FwddDajr1x/DtbH2etob8Kc7Al69+C2kRMTWFuxMnUTPia5GtJF9qdfY8XsngNmzA7peAx3uTj17id9+pTaIX+ETiMS8nw4TiU61GcwRhcib4uJviHKeD3c6jadJsaLMbG4l65OLrZk+cngftntNPUBb27Ot3kWMcmPh8LcCuoPc11SDK4DS+74u+i0OH5UcasiPpl+mJrqG3WRfYLRaqSZPnx5+AAAAAASUVORK5CYII="
    private lateinit var sharedPref: SharedPreferences
    private val PICK_IMAGE_REQUEST = 1
    private val GROUP_PREFERENCES = "GroupPreferences"
    private val GROUP_ID_KEY = "GroupID"
    private val GROUP_NAME_KEY = "GroupName"
    private val GroupID = ArrayList<String>()
    private val GroupName = ArrayList<String>()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
        setContentView(R.layout.activity_now_week)
        val savedColor = loadSelectedColor()
        applyColorToAllViews(savedColor)
        sharedPref = getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
        val SetFindSchedule = findViewById<Button>(R.id.SetFindSchedule)
        val SetVisual = findViewById<Button>(R.id.SetVisual)
        val SettingSchedule = findViewById<Button>(R.id.SettingSchedule)
        val Back1 = findViewById<Button>(R.id.Back1)
        val Back2 = findViewById<Button>(R.id.Back2)
        val Back3 = findViewById<Button>(R.id.Back3)
        val linerLayout = findViewById<LinearLayout>(R.id.linerLayout)
        val linerLayout2 = findViewById<LinearLayout>(R.id.linerLayout2)
        val linerLayout3 = findViewById<LinearLayout>(R.id.linerLayout3)
        val linerLayout4 = findViewById<LinearLayout>(R.id.linerLayout4)
        SetFindSchedule.setOnClickListener(){
            linerLayout2.setVisibility(View.VISIBLE)
            linerLayout.setVisibility(View.GONE)
        }
        SetVisual.setOnClickListener(){
            linerLayout3.setVisibility(View.VISIBLE)
            linerLayout.setVisibility(View.GONE)
        }
        SettingSchedule.setOnClickListener(){
            linerLayout4.setVisibility(View.VISIBLE)
            linerLayout.setVisibility(View.GONE)
        }
        Back1.setOnClickListener(){
            linerLayout.setVisibility(View.VISIBLE)
            linerLayout2.setVisibility(View.GONE)
        }
        Back2.setOnClickListener(){
            linerLayout.setVisibility(View.VISIBLE)
            linerLayout3.setVisibility(View.GONE)
        }
        Back3.setOnClickListener(){
            linerLayout.setVisibility(View.VISIBLE)
            linerLayout4.setVisibility(View.GONE)
        }
        //TODO ЕБАТЬ ЧТОБЫ НЕВИДИМЫМ И ВИДИМЫМ ДЕЛАТЬ
        val relativeLayout = findViewById<RelativeLayout>(R.id.relativeLayout)
        val scrollView = findViewById<ScrollView>(R.id.scrollView)

        //TODO А ЭТО МЕНЮШНАЯ ЛОГИКА
        val SelectColorButton = findViewById<Button>(R.id.SelectColorButton)
        SelectColorButton.setOnClickListener(){
            showColorPickerDialog()
        }
        ColorText = sharedPref.getInt("COLOR_TEXT", 0)
        changeColorText()
        val SetTextColor = findViewById<Button>(R.id.SelectColorText)
        SetTextColor.setOnClickListener(){
            if(ColorText==0){
                ColorText=1
                changeColorText()
                saveColorText()
            }else{
                ColorText=0
                changeColorText()
                saveColorText()
            }
        }

        loadSavedGroups()
        val GoToSchedule = findViewById<Button>(R.id.GoToSchedule)
        val GetGroupID = findViewById<Button>(R.id.GetGroupID)
        val SGroup = findViewById<Button>(R.id.SelectGroup)
        val GetGroup = findViewById<AutoCompleteTextView>(R.id.GetGroup)
        val adapter = ArrayAdapter(this, android.R.layout.simple_dropdown_item_1line, GroupName)
        GetGroup.setAdapter(adapter)

        val selectImage = findViewById<Button>(R.id.SelectImage)
        selectImage.setOnClickListener() {
            openGallery();
        }

        GetGroupID.setOnClickListener() {
            getPrepURL()
        }

        SGroup.setOnClickListener(){
            if (GroupName.contains(GetGroup.text.toString())) {
                val Schedule = "Scheduleurl.txt"
                val outputStream: FileOutputStream
                val url3 = GroupID[GroupName.indexOf(GetGroup.text.toString())]
                val printWriter: PrintWriter
                try {
                    outputStream = openFileOutput(Schedule, Context.MODE_PRIVATE)
                    printWriter = PrintWriter(outputStream)
                    printWriter.print(url3)
                    printWriter.close()
                    Toast.makeText(this@NowWeek, "Группа сохранена", Toast.LENGTH_SHORT).show()
                } catch (e: Exception) {
                    e.printStackTrace()
                }
            } else {
                Toast.makeText(this@NowWeek, "Группа не найдена", Toast.LENGTH_SHORT).show()
            }
        }

        GoToSchedule.setOnClickListener() {
            relativeLayout.setVisibility(View.VISIBLE)
            scrollView.setVisibility(View.VISIBLE)
            linerLayout.setVisibility(View.GONE)
            GlobalScope.launch(Dispatchers.IO) {
                getSchedule()
            }
        }


        sharedPref = getSharedPreferences("my_prefs", Context.MODE_PRIVATE)
        SelectGroup = sharedPref.getInt("SELECTED_GROUP", 3)
        SelectAcademy = sharedPref.getInt("SELECTED_ACADEMY", 0)
        SelectChetNechet = sharedPref.getInt("CHETNECHET", 0)
        val SetAcademyGroup = findViewById<Switch>(R.id.SetAcademyGroup)
        val SetFirstGroup = findViewById<Switch>(R.id.SetFirstGroup)
        val SetSecondGroup = findViewById<Switch>(R.id.SetSecondGroup)
        val ChetNechet = findViewById<Switch>(R.id.ChetNechet)
        val AllWeek = findViewById<Button>(R.id.AllWeek)
        when(SelectGroup){
            1 ->{
                SetSecondGroup.isChecked = true
                SetFirstGroup.isChecked = false
            }
            2 ->{
                SetSecondGroup.isChecked = false
                SetFirstGroup.isChecked = true
            }
            3 ->{
                SetSecondGroup.isChecked = false
                SetFirstGroup.isChecked = false
            }
        }
        when(SelectAcademy){
            0 ->{
                SetAcademyGroup.isChecked=false
            }
            1 ->{
                SetAcademyGroup.isChecked=true
            }
        }
        when(SelectChetNechet){
            0 ->{
                ChetNechet.isChecked=false
                AllWeek.setVisibility(View.GONE)
            }
            1 ->{
                ChetNechet.isChecked=true
                AllWeek.setVisibility(View.VISIBLE)
            }
        }
        SetFirstGroup.setOnCheckedChangeListener{buttonView, isChecked ->
            if(isChecked){
                SelectGroup=2
                SetSecondGroup.isChecked = false
                saveSelectedGroup()
                GlobalScope.launch(Dispatchers.IO) {
                    getSchedule()
                }
            }else{
                if(!SetSecondGroup.isChecked){
                    SelectGroup=3
                    saveSelectedGroup()
                    GlobalScope.launch(Dispatchers.IO) {
                        getSchedule()
                    }
                }
            }
        }
        SetSecondGroup.setOnCheckedChangeListener{buttonView, isChecked ->
            if(isChecked){
                SelectGroup=1
                SetFirstGroup.isChecked = false
                saveSelectedGroup()
                GlobalScope.launch(Dispatchers.IO) {
                    getSchedule()
                }
            }else{
                if(!SetFirstGroup.isChecked){
                    SelectGroup=3
                    saveSelectedGroup()
                    GlobalScope.launch(Dispatchers.IO) {
                        getSchedule()
                    }
                }
            }
        }
        SetAcademyGroup.setOnCheckedChangeListener{buttonView, isChecked ->
            if(isChecked){
                SelectAcademy=1
                saveAcademy()
                GlobalScope.launch(Dispatchers.IO) {
                    getSchedule()
                }
            } else {
                SelectAcademy=0
                saveAcademy()
                GlobalScope.launch(Dispatchers.IO) {
                    getSchedule()
                }
            }
        }
        ChetNechet.setOnCheckedChangeListener{buttonView, isChecked ->
            if(isChecked){
                SelectChetNechet=1
                saveChetNechet()
                AllWeek.setVisibility(View.VISIBLE)
            } else {
                SelectChetNechet=0
                saveChetNechet()
                AllWeek.setVisibility(View.GONE)
            }
        }

        //TODO ЭТО ЛОГИКА НАШЕГО РАСПИСАНИЯ
        var backgroundImage = findViewById<ImageView>(R.id.Background)
        // Получение сохраненного изображения и его установка в качестве фона
        val bitmap = loadImageFromInternalStorage("background_image.jpg")
        if (bitmap != null) {
            backgroundImage.setImageBitmap(bitmap)
        }
        val selectedImageUri: Uri? = intent.data
        if (selectedImageUri != null) {
            try {
                val bitmap = getBitmapFromUri(selectedImageUri)
                saveImageToInternalStorage(bitmap, "background_image.jpg")
                backgroundImage.setImageBitmap(bitmap)
            } catch (e: FileNotFoundException) {
                e.printStackTrace()
            }
        }
        GlobalScope.launch(Dispatchers.IO) {
            getSchedule()
        }
        val menu = findViewById<Button>(R.id.GoMenu)
        val Nextweek = findViewById<Button>(R.id.NextActivity)
        val Backweek = findViewById<Button>(R.id.BackActivity)
        val displayMetrics = resources.displayMetrics
        val dpWidthUp = displayMetrics.widthPixels/3
        menu.layoutParams.width = dpWidthUp
        Nextweek.layoutParams.width = dpWidthUp
        Backweek.layoutParams.width = dpWidthUp

        menu.setOnClickListener(){
            relativeLayout.setVisibility(View.GONE)
            scrollView.setVisibility(View.GONE)
            linerLayout.setVisibility(View.VISIBLE)
        }

        Nextweek.setOnClickListener(){
            SelectWeek++
            GlobalScope.launch(Dispatchers.IO) {
                getSchedule()
            }
        }

        Backweek.setOnClickListener(){
            SelectWeek--
            GlobalScope.launch(Dispatchers.IO) {
                getSchedule()
            }
        }
    }
    //TODO СУКА ФУНКЦИИ ДЛЯ МЕНЮ

    private fun applyColorToAllViews(color: Int) {
        // Настройка кнопок
        val buttonIds = arrayOf(
            R.id.GetGroupID,
            R.id.SelectGroup,
            R.id.SelectImage,
            R.id.SelectColorButton,
            R.id.SelectColorText,
            R.id.GoToSchedule,
            R.id.BackActivity,
            R.id.GoMenu,
            R.id.NextActivity,
            R.id.Pond,
            R.id.Vtor,
            R.id.Sred,
            R.id.Chet,
            R.id.Pyat,
            R.id.Subb,
            R.id.AllWeek,
            R.id.SetFindSchedule,
            R.id.SetVisual,
            R.id.SettingSchedule,
            R.id.Back1,
            R.id.Back2,
            R.id.Back3
        )

        for (buttonId in buttonIds) {
            val button = findViewById<Button>(buttonId)
            applyColorToView(button, color)
        }

        // Настройка переключателей
        val switchIds = arrayOf(
            R.id.SetFirstGroup,
            R.id.SetSecondGroup,
            R.id.SetAcademyGroup,
            R.id.ChetNechet
        )

        for (switchId in switchIds) {
            val switch = findViewById<Switch>(switchId)
            applyColorToView(switch, color)
        }
    }

    private fun applyColorToView(view: Button, color: Int) {
        val drawable = StateListDrawable()
        val cornerRadiusDp = 15
        val strokeWidthDp = 4
        val cornerRadiusPx = dpToPx(cornerRadiusDp)
        val strokeWidthPx = dpToPx(strokeWidthDp)

        val pressed = GradientDrawable()
        pressed.setColor(Color.parseColor("#B3612E9C"))
        pressed.setStroke(strokeWidthPx, Color.parseColor("#00000000"))
        pressed.cornerRadius = cornerRadiusPx.toFloat()
        drawable.addState(intArrayOf(android.R.attr.state_pressed), pressed)

        val normal = GradientDrawable()
        normal.setColor(color)
        normal.setStroke(strokeWidthPx, Color.parseColor("#00000000"))
        normal.cornerRadius = cornerRadiusPx.toFloat()
        drawable.addState(intArrayOf(), normal)

        view.background = drawable
    }

    private fun applyColorToView(view: Switch, color: Int) {
        val drawable = StateListDrawable()
        val cornerRadiusDp = 15
        val strokeWidthDp = 4
        val cornerRadiusPx = dpToPx(cornerRadiusDp)
        val strokeWidthPx = dpToPx(strokeWidthDp)

        val pressed = GradientDrawable()
        pressed.setColor(Color.parseColor("#B3612E9C"))
        pressed.setStroke(strokeWidthPx, Color.parseColor("#00000000"))
        pressed.cornerRadius = cornerRadiusPx.toFloat()
        drawable.addState(intArrayOf(android.R.attr.state_pressed), pressed)

        val normal = GradientDrawable()
        normal.setColor(color)
        normal.setStroke(strokeWidthPx, Color.parseColor("#00000000"))
        normal.cornerRadius = cornerRadiusPx.toFloat()
        drawable.addState(intArrayOf(), normal)

        view.background = drawable
    }

    private fun saveSelectedColor(color: Int) {
        val sharedPreferences = getSharedPreferences("MyPrefs", Context.MODE_PRIVATE)
        val editor = sharedPreferences.edit()
        editor.putInt("selected_color", color)
        editor.apply()
    }

    private fun loadSelectedColor(): Int {
        val sharedPreferences = getSharedPreferences("MyPrefs", Context.MODE_PRIVATE)
        return sharedPreferences.getInt("selected_color", Color.WHITE) // Цвет по умолчанию
    }

    private fun showColorPickerDialog() {
        val colorPicker = ColorPickerDialog(
            this,
            Color.BLACK, // color init
            true, // true is show alpha
            object : ColorPickerDialog.OnColorPickerListener {
                override fun onCancel(dialog: ColorPickerDialog?) {
                    // handle click button Cancel
                }

                override fun onOk(dialog: ColorPickerDialog?, colorPicker: Int) {
                    // handle click button OK
                    applyColor(colorPicker)
                }
            })
        colorPicker.show()
    }

    private fun applyColor(color: Int) {
        val selectColorButton = findViewById<Button>(R.id.SelectColorButton)

        val drawable = StateListDrawable()
        val cornerRadiusDp = 15
        val strokeWidthDp = 4

        val cornerRadiusPx = dpToPx(cornerRadiusDp)
        val strokeWidthPx = dpToPx(strokeWidthDp)

        val pressed = GradientDrawable()
        pressed.setColor(Color.parseColor("#B3612E9C"))
        pressed.setStroke(strokeWidthPx, Color.parseColor("#00000000"))
        pressed.cornerRadius = cornerRadiusPx.toFloat()
        drawable.addState(intArrayOf(android.R.attr.state_pressed), pressed)

        val normal = GradientDrawable()
        normal.setColor(color)
        normal.setStroke(strokeWidthPx, Color.parseColor("#00000000"))
        normal.cornerRadius = cornerRadiusPx.toFloat()
        drawable.addState(intArrayOf(), normal)

        selectColorButton.background = drawable
        saveSelectedColor(color)
        applyColorToAllViews(color)
    }

    private fun dpToPx(dp: Int): Int {
        val density = resources.displayMetrics.density
        return (dp * density).toInt()
    }

    fun changeColorText() {
        val color = if (ColorText == 0) Color.BLACK else Color.WHITE

        val buttons = listOf(
            R.id.GetGroupID, R.id.SelectGroup, R.id.GoToSchedule, R.id.SelectImage,
            R.id.SelectColorButton, R.id.SelectColorText, R.id.BackActivity, R.id.GoMenu,
            R.id.NextActivity, R.id.Pond, R.id.Vtor, R.id.Sred, R.id.Chet, R.id.Pyat,
            R.id.Subb, R.id.AllWeek, R.id.SetFindSchedule, R.id.SetVisual, R.id.SettingSchedule,
            R.id.Back1, R.id.Back2, R.id.Back3
        )

        buttons.forEach { buttonId ->
            findViewById<Button>(buttonId).setTextColor(color)
        }

        val switches = listOf(R.id.SetAcademyGroup, R.id.SetFirstGroup, R.id.SetSecondGroup, R.id.ChetNechet)

        switches.forEach { switchId ->
            findViewById<Switch>(switchId).setTextColor(color)
        }
    }

    private fun saveColorText() {
        val editor = sharedPref.edit()
        editor.putInt("COLOR_TEXT", ColorText)
        editor.apply()
    }

    private fun openGallery() {
        val intent = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)
        startActivityForResult(intent, PICK_IMAGE_REQUEST)
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, @Nullable data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        if (requestCode == PICK_IMAGE_REQUEST && resultCode == RESULT_OK && data != null && data.data != null) {
            val selectedImageUri: Uri? = data.data
            val intent = Intent(this@NowWeek, NowWeek::class.java)
            intent.data = selectedImageUri
            startActivity(intent)
        }
    }

    class DatabaseHelper(context: Context) : SQLiteOpenHelper(context, DATABASE_NAME, null, DATABASE_VERSION) {

        companion object {
            private const val DATABASE_NAME = "ID.db"
            private const val DATABASE_VERSION = 1
        }

        override fun onCreate(db: SQLiteDatabase) {
            // Здесь вы можете создать таблицы и выполнить другие операции, необходимые при создании базы данных
        }

        override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {
            // Здесь вы можете обновить схему базы данных при необходимости
        }

        fun copyDatabaseFromAssets(context: Context) {
            val input = context.assets.open(DATABASE_NAME)
            val outputFile = context.getDatabasePath(DATABASE_NAME)
            val output = FileOutputStream(outputFile)

            input.use { input ->
                output.use { output ->
                    input.copyTo(output)
                }
            }
        }
    }

    private fun getPrepURL(){
        GroupID.clear()
        GroupName.clear()
        val scope = CoroutineScope(Job() + Dispatchers.IO)
        scope.launch {
            val dbHelper = DatabaseHelper(this@NowWeek) // Создаем экземпляр DatabaseHelper
            dbHelper.copyDatabaseFromAssets(this@NowWeek) // Копируем базу данных из assets во внутреннее хранилище

            val db = dbHelper.readableDatabase // Открываем базу данных

            val projection = arrayOf("groupID", "groupName") // Список столбцов, которые нам нужно получить

            // Выполнение запроса к базе данных
            val cursor = db.query(
                "Groups", // Имя вашей таблицы
                projection,
                null, // where clause, если нужно
                null, // аргументы для where clause, если нужно
                null,
                null,
                null
            )

            // Перебор результатов запроса и добавление их в списки
            while (cursor.moveToNext()) {
                val groupID = cursor.getString(cursor.getColumnIndexOrThrow("groupId"))
                val groupName = cursor.getString(cursor.getColumnIndexOrThrow("groupName"))
                GroupID.add(groupID)
                GroupName.add(groupName)
            }

            cursor.close() // не забудьте закрыть курсор
            db.close() // и закрыть базу данных
        }
        getScheduleURL()
    }

    private fun getScheduleURL() {
        val scope = CoroutineScope(Job() + Dispatchers.IO)
        scope.launch {
            withContext(Dispatchers.Main) {
                // Этот код выполнится после завершения doInBackground
                Toast.makeText(this@NowWeek, "Началась загрузка групп", Toast.LENGTH_SHORT).show()
            }
            val url = "https://www.istu.edu/schedule/"
            var totalSubdiv = 0 // Общее количество subdiv
            try {
                // Получаем HTML-код страницы
                val doc = Jsoup.connect(url).get()

                // Находим все теги <a> внутри <ul>
                val links = doc.select("ul a")

                // Итерируемся по найденным ссылкам и извлекаем значения атрибута "subdiv"
                for (link in links) {
                    val href = link.attr("href")
                    // Разбиваем строку href на параметры
                    val params = href.split("?")
                    if (params.size == 2) {
                        val keyValuePairs = params[1].split("&")
                        for (pair in keyValuePairs) {
                            val keyValue = pair.split("=")
                            if (keyValue.size == 2 && keyValue[0] == "subdiv") {
                                val subdivValue = keyValue[1]
                                totalSubdiv++ // Увеличиваем количество subdiv
                                val url2 = "https://www.istu.edu/schedule/?subdiv=$subdivValue"
                                try {
                                    // Получаем HTML-код страницы
                                    val doc = Jsoup.connect(url2).get()

                                    // Находим все теги <a> внутри страницы
                                    val links = doc.select("a[href]")

                                    // Итерируемся по найденным ссылкам
                                    for (link in links) {
                                        val href = link.attr("href")
                                        val text = link.text()

                                        // Проверяем, содержит ли href атрибут "group"
                                        if (href.contains("group=")) {
                                            val groupValue = href.split("group=")[1].split("&")[0]
                                            if(!GroupName.contains(text)) {
                                                GroupID.add("?group=$groupValue")
                                                GroupName.add(text)
                                            }
                                        }
                                    }
                                } catch (e: Exception) {
                                    e.printStackTrace()
                                }
                            }
                        }
                    }
                }
            } catch (e: Exception) {
                e.printStackTrace()
            }
            withContext(Dispatchers.Main) {
                // Этот код выполнится после завершения doInBackground
                Toast.makeText(this@NowWeek, "Группы выгружены", Toast.LENGTH_SHORT).show()
                // Сохраняем данные после их загрузки
                saveGroups()
            }
        }
    }

    private fun saveGroups() {
        val sharedPreferences = getSharedPreferences(GROUP_PREFERENCES, Context.MODE_PRIVATE)
        val editor = sharedPreferences.edit()
        editor.putInt("GroupCount", GroupID.size)
        for (i in GroupID.indices) {
            editor.putString("$GROUP_ID_KEY$i", GroupID[i])
            editor.putString("$GROUP_NAME_KEY$i", GroupName[i])
        }
        editor.apply()
    }

    private fun loadSavedGroups() {
        val sharedPreferences = getSharedPreferences(GROUP_PREFERENCES, Context.MODE_PRIVATE)
        val groupCount = sharedPreferences.getInt("GroupCount", 0)
        for (i in 0 until groupCount) {
            val groupID = sharedPreferences.getString("$GROUP_ID_KEY$i", null)
            val groupName = sharedPreferences.getString("$GROUP_NAME_KEY$i", null)
            if (groupID != null && groupName != null) {
                GroupID.add(groupID)
                GroupName.add(groupName)
            }
        }
    }

    //TODO БЛЯТЬ ЭТО ФУНКЦИИ ДЛЯ РАСПИСАНИЯ

    private fun saveSelectedGroup() {
        val editor = sharedPref.edit()
        editor.putInt("SELECTED_GROUP", SelectGroup)
        editor.apply()
    }

    private fun saveAcademy() {
        val editor = sharedPref.edit()
        editor.putInt("SELECTED_ACADEMY", SelectAcademy)
        editor.apply()
    }

    private fun saveChetNechet() {
        val editor = sharedPref.edit()
        editor.putInt("CHETNECHET", SelectChetNechet)
        editor.apply()
    }

    private fun loadImageFromInternalStorage(filename: String): Bitmap? {
        return try {
            val inputStream = openFileInput(filename)
            BitmapFactory.decodeStream(inputStream)
        } catch (e: FileNotFoundException) {
            e.printStackTrace()
            null
        }
    }

    private fun getBitmapFromUri(uri: Uri): Bitmap {
        val inputStream: InputStream? = contentResolver.openInputStream(uri)
        return BitmapFactory.decodeStream(inputStream)
    }

    private fun saveImageToInternalStorage(bitmap: Bitmap, filename: String) {
        var fileOutputStream: FileOutputStream? = null
        try {
            fileOutputStream = openFileOutput(filename, Context.MODE_PRIVATE)
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fileOutputStream)
        } catch (e: Exception) {
            e.printStackTrace()
        } finally {
            try {
                fileOutputStream?.close()
            } catch (e: IOException) {
                e.printStackTrace()
            }
        }
    }

    @RequiresApi(Build.VERSION_CODES.O)
    private suspend fun getSchedule() {
        val cm = getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
        val activeNetwork = cm.activeNetworkInfo
        val isConnected = activeNetwork != null && activeNetwork.isConnectedOrConnecting
        if (isConnected) {
            clearEmptyScheduleFiles()
            val today = LocalDate.now().plusWeeks(SelectWeek.toLong()).toString()
            val url = "https://www.istu.edu/schedule/" + getScheduleUrl() + "&date=" + today
            val document = Jsoup.connect(url).get()
            week = document.selectFirst("div.alert-info > p:nth-child(3) > b")?.text()?.trim().toString()
            val scheduleDivs = document.select("div.full-odd-week, div.full-even-week")
            val dayHeaders = document.select("h3.day-heading")
            val classLines = document.select("div.class-lines")
            for (i in dayHeaders.indices) {
                val date = dayHeaders[i].text().trim()
                val daySchedule = getDaySchedule(date)
                val classLineItems = classLines[i].select("div.class-line-item")
                var textSchedule = ""
                for (classLineItem in classLineItems) {
                    val classTime = classLineItem.selectFirst("div.class-time")?.text()?.trim() ?: ""
                    val classTails = classLineItem.select("div.class-tail")
                    for (classTail in classTails) {
                        if (scheduleDivs[0].hasClass("full-odd-week") && classTail.hasClass("class-even-week")) {
                            continue
                        } else if (scheduleDivs[0].hasClass("full-even-week") && classTail.hasClass("class-odd-week")) {
                            continue
                        }
                        try {
                            if(!(classTail.select("div.class-info").get(1)?.text()?.trim())?.contains("подгруппа $SelectGroup")!!) {
                                val classTailText = classTail?.text()?.trim() ?: ""
                                var unicode:Int
                                var unicodeS:String
                                if (!classTailText.equals("свободно")) {
                                    unicode = 0x1F553
                                    unicodeS=String(Character.toChars(unicode))
                                    textSchedule += "\n" + unicodeS + "$classTime\n"
                                }
                                var classInfo = classTail.selectFirst("div.class-info")?.ownText()?.trim() ?: ""
                                classInfo = classInfo.replace(",","")
                                if (!TextUtils.isEmpty(classInfo)) textSchedule += "$classInfo\n"
                                var professor = classTail.selectFirst("div.class-info")?.text()?.trim() ?: ""
                                professor = professor.replace(classInfo,"").trim()
                                val classPred = classTail.selectFirst("div.class-pred")?.text()?.trim() ?: ""
                                val classPredElement = classTail.selectFirst("div.class-pred")
                                val imgElement = classPredElement?.selectFirst("img")
                                val srcAttributeValue = imgElement?.attr("src") ?: ""
                                if(srcAttributeValue.contains(AcademyPick) && SelectAcademy==0){
                                    textSchedule=textSchedule.substringBeforeLast("\n")
                                    textSchedule=textSchedule.substringBeforeLast("\n")
                                    textSchedule=textSchedule.substringBeforeLast("\n")
                                }
                                else{
                                    if (!TextUtils.isEmpty(classPred)) textSchedule += "$classPred\n"
                                    val classInfo2 = classTail.select("div.class-info").get(1)?.text()?.trim() ?: ""
                                    if (!TextUtils.isEmpty(classInfo2)){
                                        if(!TextUtils.isEmpty(professor)){
                                            if (!classInfo2.contains(professor)){
                                                textSchedule+="$professor\n"
                                            }
                                        }
                                        if(classInfo2.contains("подгруппа")) textSchedule += "$classInfo2\n"
                                    }
                                    val classAud = classTail.selectFirst("div.class-aud")?.text()?.trim() ?: ""
                                    unicode = 0x1F3E2
                                    unicodeS=String(Character.toChars(unicode))
                                    if (!TextUtils.isEmpty(classAud)) textSchedule += unicodeS + "Аудитория: $classAud\n"
                                }
                            }
                        } catch (e: IndexOutOfBoundsException) {
                        }
                    }
                }
                if (!textSchedule.isEmpty()) {
                    var unicode:Int
                    var unicodeS:String
                    unicode = 0x1F4A1
                    unicodeS=String(Character.toChars(unicode))
                    textSchedule = "$unicodeS$date\n" + textSchedule
                }
                saveScheduleToFile(daySchedule, textSchedule)
            }
        }
        updateUI()
    }

    private suspend fun updateUI() {
        withContext(Dispatchers.Main) {
            val Pon = findViewById<TextView>(R.id.pn)
            val Vtr = findViewById<TextView>(R.id.vt)
            val Srd = findViewById<TextView>(R.id.sr)
            val Chtv = findViewById<TextView>(R.id.cht)
            val Ptn = findViewById<TextView>(R.id.pt)
            val Sbb = findViewById<TextView>(R.id.sb)
            val Pond = findViewById<Button>(R.id.Pond)
            val Vtor = findViewById<Button>(R.id.Vtor)
            val Sred = findViewById<Button>(R.id.Sred)
            val Chet = findViewById<Button>(R.id.Chet)
            val Pyat = findViewById<Button>(R.id.Pyat)
            val Subb = findViewById<Button>(R.id.Subb)
            val AllWeek = findViewById<Button>(R.id.AllWeek)
            val displayMetrics = resources.displayMetrics
            val dpWidth = displayMetrics.widthPixels
            var visabilitytb=0

            var inputStream: FileInputStream

            val Pn = "Pn.txt"
            var pn = ""
            try {
                inputStream = openFileInput(Pn)
                val size: Int = inputStream.available()
                val buffer = ByteArray(size)
                inputStream.read(buffer)
                inputStream.close()
                pn = String(buffer, Charset.forName("UTF-8"))
            } catch (e: Exception) {
                e.printStackTrace()
            }
            if(TextUtils.isEmpty(pn)){
                Pon.setVisibility(View.GONE)
                Pond.setVisibility(View.GONE)
            } else{
                Pon.setVisibility(View.VISIBLE)
                Pond.setVisibility(View.VISIBLE)
                pn=pn.substringBeforeLast("\n")
                Pon.setText(pn)
                visabilitytb++
            }

            val Vt = "Vt.txt"
            var vt = ""
            try {
                inputStream = openFileInput(Vt)
                val size: Int = inputStream.available()
                val buffer = ByteArray(size)
                inputStream.read(buffer)
                inputStream.close()
                vt = String(buffer, Charset.forName("UTF-8"))
            } catch (e: Exception) {
                e.printStackTrace()
            }
            if(TextUtils.isEmpty(vt)){
                Vtr.setVisibility(View.GONE)
                Vtor.setVisibility(View.GONE)
            } else{
                Vtr.setVisibility(View.VISIBLE)
                Vtor.setVisibility(View.VISIBLE)
                vt=vt.substringBeforeLast("\n")
                Vtr.setText(vt)
                visabilitytb++
            }

            val Sr = "Sr.txt"
            var sr = ""
            try {
                inputStream = openFileInput(Sr)
                val size: Int = inputStream.available()
                val buffer = ByteArray(size)
                inputStream.read(buffer)
                inputStream.close()
                sr = String(buffer, Charset.forName("UTF-8"))
            } catch (e: Exception) {
                e.printStackTrace()
            }
            if(TextUtils.isEmpty(sr)){
                Srd.setVisibility(View.GONE)
                Sred.setVisibility(View.GONE)
            } else{
                Srd.setVisibility(View.VISIBLE)
                Sred.setVisibility(View.VISIBLE)
                sr=sr.substringBeforeLast("\n")
                Srd.setText(sr)
                visabilitytb++
            }

            val Cht = "Cht.txt"
            var cht = ""
            try {
                inputStream = openFileInput(Cht)
                val size: Int = inputStream.available()
                val buffer = ByteArray(size)
                inputStream.read(buffer)
                inputStream.close()
                cht = String(buffer, Charset.forName("UTF-8"))
            } catch (e: Exception) {
                e.printStackTrace()
            }
            if(TextUtils.isEmpty(cht)){
                Chtv.setVisibility(View.GONE)
                Chet.setVisibility(View.GONE)
            } else{
                Chtv.setVisibility(View.VISIBLE)
                Chet.setVisibility(View.VISIBLE)
                cht=cht.substringBeforeLast("\n")
                Chtv.setText(cht)
                visabilitytb++
            }

            val Pt = "Pt.txt"
            var pt = ""
            try {
                inputStream = openFileInput(Pt)
                val size: Int = inputStream.available()
                val buffer = ByteArray(size)
                inputStream.read(buffer)
                inputStream.close()
                pt = String(buffer, Charset.forName("UTF-8"))
            } catch (e: Exception) {
                e.printStackTrace()
            }
            if(TextUtils.isEmpty(pt)){
                Ptn.setVisibility(View.GONE)
                Pyat.setVisibility(View.GONE)
            } else{
                Ptn.setVisibility(View.VISIBLE)
                Pyat.setVisibility(View.VISIBLE)
                pt=pt.substringBeforeLast("\n")
                Ptn.setText(pt)
                visabilitytb++
            }

            val Sb = "Sb.txt"
            var sb = ""
            try {
                inputStream = openFileInput(Sb)
                val size: Int = inputStream.available()
                val buffer = ByteArray(size)
                inputStream.read(buffer)
                inputStream.close()
                sb = String(buffer, Charset.forName("UTF-8"))
            } catch (e: Exception) {
                e.printStackTrace()
            }
            if(TextUtils.isEmpty(sb)){
                Sbb.setVisibility(View.GONE)
                Subb.setVisibility(View.GONE)
            } else{
                Sbb.setVisibility(View.VISIBLE)
                Subb.setVisibility(View.VISIBLE)
                sb=sb.substringBeforeLast("\n")
                Sbb.setText(sb)
                visabilitytb++
            }

            Pond.setOnClickListener(){
                Pon.setVisibility(View.VISIBLE)
                Vtr.setVisibility(View.GONE)
                Srd.setVisibility(View.GONE)
                Chtv.setVisibility(View.GONE)
                Ptn.setVisibility(View.GONE)
                Sbb.setVisibility(View.GONE)
            }

            Vtor.setOnClickListener(){
                Pon.setVisibility(View.GONE)
                Vtr.setVisibility(View.VISIBLE)
                Srd.setVisibility(View.GONE)
                Chtv.setVisibility(View.GONE)
                Ptn.setVisibility(View.GONE)
                Sbb.setVisibility(View.GONE)
            }

            Sred.setOnClickListener(){
                Pon.setVisibility(View.GONE)
                Vtr.setVisibility(View.GONE)
                Srd.setVisibility(View.VISIBLE)
                Chtv.setVisibility(View.GONE)
                Ptn.setVisibility(View.GONE)
                Sbb.setVisibility(View.GONE)
            }

            Chet.setOnClickListener(){
                Pon.setVisibility(View.GONE)
                Vtr.setVisibility(View.GONE)
                Srd.setVisibility(View.GONE)
                Chtv.setVisibility(View.VISIBLE)
                Ptn.setVisibility(View.GONE)
                Sbb.setVisibility(View.GONE)
            }

            Pyat.setOnClickListener(){
                Pon.setVisibility(View.GONE)
                Vtr.setVisibility(View.GONE)
                Srd.setVisibility(View.GONE)
                Chtv.setVisibility(View.GONE)
                Ptn.setVisibility(View.VISIBLE)
                Sbb.setVisibility(View.GONE)
            }

            Subb.setOnClickListener(){
                Pon.setVisibility(View.GONE)
                Vtr.setVisibility(View.GONE)
                Srd.setVisibility(View.GONE)
                Chtv.setVisibility(View.GONE)
                Ptn.setVisibility(View.GONE)
                Sbb.setVisibility(View.VISIBLE)
            }

            AllWeek.setOnClickListener(){
                if(TextUtils.isEmpty(Pon.text)){
                    Pon.setVisibility(View.GONE)
                } else{
                    Pon.setVisibility(View.VISIBLE)
                }
                if(TextUtils.isEmpty(vt)){
                    Vtr.setVisibility(View.GONE)
                } else{
                    Vtr.setVisibility(View.VISIBLE)
                }
                if(TextUtils.isEmpty(sr)){
                    Srd.setVisibility(View.GONE)
                } else{
                    Srd.setVisibility(View.VISIBLE)
                }
                if(TextUtils.isEmpty(cht)){
                    Chtv.setVisibility(View.GONE)
                } else{
                    Chtv.setVisibility(View.VISIBLE)
                }
                if(TextUtils.isEmpty(pt)){
                    Ptn.setVisibility(View.GONE)
                } else{
                    Ptn.setVisibility(View.VISIBLE)
                }
                if(TextUtils.isEmpty(sb)){
                    Sbb.setVisibility(View.GONE)
                } else{
                    Sbb.setVisibility(View.VISIBLE)
                }
            }

            if(visabilitytb!=0) {
                val elementWidth = dpWidth / visabilitytb

                if (TextUtils.isEmpty(pn)) {
                    Pond.setVisibility(View.GONE)
                } else {
                    Pond.layoutParams.width = elementWidth
                    Pond.setVisibility(View.VISIBLE)
                }
                if (TextUtils.isEmpty(vt)) {
                    Vtor.setVisibility(View.GONE)
                } else {
                    Vtor.layoutParams.width = elementWidth
                    Vtor.setVisibility(View.VISIBLE)
                }
                if (TextUtils.isEmpty(sr)) {
                    Sred.setVisibility(View.GONE)
                } else {
                    Sred.layoutParams.width = elementWidth
                    Sred.setVisibility(View.VISIBLE)
                }
                if (TextUtils.isEmpty(cht)) {
                    Chet.setVisibility(View.GONE)
                } else {
                    Chet.layoutParams.width = elementWidth
                    Chet.setVisibility(View.VISIBLE)
                }
                if (TextUtils.isEmpty(pt)) {
                    Pyat.setVisibility(View.GONE)
                } else {
                    Pyat.layoutParams.width = elementWidth
                    Pyat.setVisibility(View.VISIBLE)
                }
                if (TextUtils.isEmpty(sb)) {
                    Subb.setVisibility(View.GONE)
                } else {
                    Subb.layoutParams.width = elementWidth
                    Subb.setVisibility(View.VISIBLE)
                }
                AllWeek.setText(week)
                AllWeek.requestLayout()
                Pond.requestLayout()
                Vtor.requestLayout()
                Sred.requestLayout()
                Chet.requestLayout()
                Pyat.requestLayout()
                Subb.requestLayout()
            }
            if (visabilitytb == 0) {
                Pon.setVisibility(View.VISIBLE)
                Pon.setText("Расписанию на эту неделю отсутствует")
                AllWeek.setText("")
            }

        }
    }

    private fun getScheduleUrl(): String {
        val fileName = "Scheduleurl.txt"
        return try {
            val inputStream = openFileInput(fileName)
            val size: Int = inputStream.available()
            val buffer = ByteArray(size)
            inputStream.read(buffer)
            inputStream.close()
            String(buffer, Charset.forName("UTF-8"))
        } catch (e: Exception) {
            e.printStackTrace()
            ""
        }
    }

    private fun getDaySchedule(date: String): Int {
        // Determine the schedule for the given date
        // Return the day schedule index
        return when {
            date.contains("понедельник") -> 0
            date.contains("вторник") -> 1
            date.contains("среда") -> 2
            date.contains("четверг") -> 3
            date.contains("пятница") -> 4
            date.contains("суббота") -> 5
            else -> -1
        }
    }

    private fun saveScheduleToFile(daySchedule: Int, textSchedule: String) {
        val fileName = when (daySchedule) {
            0 -> "Pn.txt"
            1 -> "Vt.txt"
            2 -> "Sr.txt"
            3 -> "Cht.txt"
            4 -> "Pt.txt"
            5 -> "Sb.txt"
            else -> ""
        }
        try {
            openFileOutput(fileName, Context.MODE_PRIVATE).use {
                it.write(textSchedule.toByteArray())
            }
        } catch (e: Exception) {
            e.printStackTrace()
        }
    }

    private fun clearEmptyScheduleFiles() {
        val filesToDelete = listOf("Pn.txt", "Vt.txt", "Sr.txt", "Cht.txt", "Pt.txt", "Sb.txt")
        filesToDelete.forEach { fileName ->
            try {
                openFileOutput(fileName, Context.MODE_PRIVATE).use {
                    it.write("".toByteArray())
                }
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
    }
}